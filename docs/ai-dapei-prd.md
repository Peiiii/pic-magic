# AI搭配与图像编辑 PRD

## 1. 项目背景
- 目标人群在移动端和桌面端常用社交平台发布照片，希望快速实现换装、姿态融合、场景替换等复杂需求。
- 市场上已有的工具要么需要手动抠图与合成，要么仅支持预设模板，智能化与个性化程度不足。
- 最新的图像编辑模型（SeedDream 4、Nano Banana 等）支持多模态融合和局部编辑，为构建灵活的 AI P 图体验提供了可能。

## 2. 产品愿景与目标
- 愿景：打造一个“所见即所得”的 AI 图像搭配平台，用户通过自然语言即可组合场景、人物、服装、姿态表情等要素。
- 第一阶段目标：提供基础的“双图像+指令”工作流，支持服装替换、姿势迁移、风格/表情调整等常见搭配操作。

## 3. 用户画像
- 轻量创作者：在社交平台发布内容，追求效率与视觉一致性。
- 设计师与摄影师：需要快速尝试不同服装与场景组合，作为灵感生成工具。
- 电商卖家：希望实现商品服装快速换模特、换场景。

## 4. 核心价值主张
- 无需专业技能，通过自然语言描述即可编辑。
- 支持多种模型和组合策略，灵活组合多张图片的要素。
- 可视化预览与迭代友好，保留编辑历史与参数。

## 5. 用户场景与任务流程
### 5.1 典型任务
1. **换装任务**：左图选择人物与姿态，右图提供服装，自然语言描述“沿用左图人物和姿态，替换成右图服装，保持场景不变”。
2. **场景替换任务**：左图保留人物与服装，右图提供新场景，指令描述“将人物放入右图场景，调整光影匹配”。
3. **姿态融合任务**：左图的场景和服装，右图提供目标人物姿态与表情，组合生成新结果。

### 5.2 用户流程（MVP）
1. 上传或选择两张基础图片（左图与右图）。
2. 在每张图上标记想要保留/采集的要素（如人物、服装、背景）。
3. 输入自然语言指令描述合成需求（可提供模板）。
4. 选择使用的生成模型（SeedDream 4 / Nano Banana）。
5. 点击生成，查看预览；如不满意，可调整指令或选项并重新生成。
6. 下载结果或保存到历史记录。

## 6. 功能需求
### 6.1 必备功能（MVP）
- 图片上传与预览：支持本地两张图片上传，显示缩略图与详情。
- 要素标记（初期为抽象选择）：在 UI 内复选需要保留的要素（场景、人物、服装、姿态/表情）。
- 指令输入：提供自然语言输入框 + 模板快捷选项。
- 模型选择：SeedDream 4、Nano Banana（允许扩展更多模型）。
- 生成请求：调用后端接口，传递图片、要素选择、指令、模型等参数。
- 历史记录：展示最近生成结果，支持再次生成/下载。

### 6.2 可选功能（后续迭代）
- 局部遮罩绘制，支持精准控制编辑区域。
- 多步骤工作流，支持分步生成并合成。
- 协作分享：生成结果分享链接、团队协作审批。
- 模型参数高级设置（CFG、步数、种子）。

## 7. 非功能性需求
- 前端使用 React + Vite + Tailwind CSS + shadcn/ui 组件库。
- 保持响应式设计，桌面为主，同时兼顾平板显示。
- 生成任务状态需要具备 Loading、成功、失败提示。
- 本地状态持久化（LocalStorage）保存历史记录/偏好。

## 8. 技术方案概览
- 前端：React + TypeScript；shadcn/ui 建立一致 UI 体系；Tailwind CSS 做布局与自定义样式。
- 模型调用：后端 API （暂未实现，前端使用 mock 接口模拟）；预留模型枚举与参数结构。
- 状态管理：轻量方案（React Hooks + Zustand 或 Context）；MVP 可用 useReducer + Context。
- 文件上传：前端先封装为 Base64/Blob，后续对接后端上传。

## 9. 数据结构与接口草案
```ts
// 生成任务参数
interface SynthesizeRequest {
  leftImageId: string;
  rightImageId: string;
  retainedElements: {
    scene: 'left' | 'right' | 'blend';
    person: 'left' | 'right' | 'blend';
    outfit: 'left' | 'right' | 'blend';
    poseExpression: 'left' | 'right' | 'blend';
  };
  prompt: string;
  model: 'seedDream4' | 'nanoBanana';
  options?: {
    guidance?: number;
    steps?: number;
    seed?: number;
  };
}

interface SynthesizeResult {
  taskId: string;
  status: 'pending' | 'running' | 'succeeded' | 'failed';
  outputImageUrl?: string;
  errorMessage?: string;
}
```

## 10. 成功指标
- 用户完成一次生成的平均操作步骤 ≤ 5 步。
- 生成结果满意度 ≥ 70%（通过用户反馈或点赞统计）。
- 首次打开到完成一次生成流程 < 3 分钟。

## 11. 里程碑
1. PRD & 设计稿确认（当前阶段）。
2. 前端 MVP 界面搭建，使用 mock 数据完成流程。（当前目标）
3. 后端模型接入（SeedDream 4）。
4. 引入第二模型（Nano Banana）并实现模型选择策略。
5. 增强功能（遮罩绘制、历史管理、协作）。

## 12. 风险与假设
- 模型接口的可用性：需要确认许可证和调用成本。
- 用户上传隐私：需明确数据存储策略与隐私条款。
- 生成质量依赖模型能力，可能需要额外后处理。

## 13. 未来展望
- 增加多图融合（>2 张）与视频生成能力。
- 引入 AI 风格顾问/推荐，自动建议搭配方案。
- 提供移动端 App 与插件生态，拓展使用场景。
